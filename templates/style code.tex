\documentclass[12pt]{article}
\usepackage[a4paper, margin=2cm]{geometry}
\title{How to format code in latex}
\usepackage[dvipsnames]{xcolor}
\usepackage{listings}
\definecolor{verylightgray}{gray}{0.92}
\lstdefinestyle{csharpstyle}{
    language=[Sharp]C,
    basicstyle=\ttfamily\small\color{blue},
    keywordstyle=\color{red},
    stringstyle=\color{orange},
    commentstyle=\color{ForestGreen},
    numbers=none,
    stepnumber=1,
    breaklines=true,
    tabsize=4,
    showstringspaces=false,
    backgroundcolor=\color{verylightgray}
}
\lstset{style=csharpstyle}
\begin{document}
\maketitle
\begin{lstlisting}
public class A {
    // A comment
    public static void Main() {
        Console.WriteLine("Hello");
\end{lstlisting}
\end{document}